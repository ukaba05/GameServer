var gdjs;(function(g){const a=new g.Logger("Filesystem");let u;(function(n){const p=typeof require!="undefined"?require("path"):null,i=typeof require!="undefined"?require("fs"):null,l=typeof require!="undefined"?require("fs/promises"):null;i||a.warn("Filesystem is not supported on this platform! Only PC builds support filesystem access."),n.getDirectoryName=function(r){return p?p.dirname(r):""},n.getFileName=function(r){return p?p.basename(r):""},n.getExtensionName=function(r){return p?p.extname(r):""},n.getDesktopPath=function(r){const e=r.getGame().getRenderer().getElectronRemote(),t=e?e.app:null;return t&&t.getPath("desktop")||""},n.getDocumentsPath=function(r){const e=r.getGame().getRenderer().getElectronRemote(),t=e?e.app:null;return t&&t.getPath("documents")||""},n.getPicturesPath=function(r){const e=r.getGame().getRenderer().getElectronRemote(),t=e?e.app:null;return t&&t.getPath("pictures")||""},n.getExecutablePath=function(r){const e=r.getGame().getRenderer().getElectronRemote(),t=e?e.app:null;return t&&t.getPath("exe")||""},n.getExecutableFolderPath=function(r){const e=n.getExecutablePath(r);return p?p.dirname(e):""},n.getUserdataPath=function(r){const e=r.getGame().getRenderer().getElectronRemote(),t=e?e.app:null;return t&&t.getPath("userData")||""},n.getUserHomePath=function(r){const e=r.getGame().getRenderer().getElectronRemote(),t=e?e.app:null;return t&&t.getPath("home")||""},n.getTempPath=function(r){const e=r.getGame().getRenderer().getElectronRemote(),t=e?e.app:null;return t&&t.getPath("temp")||""},n.getPathDelimiter=function(){return p&&p.sep||"/"},n.makeDirectory=function(r,e){let t="error";if(i)try{i.mkdirSync(r),t="ok"}catch(o){a.error("Unable to create directory at: '"+r+"': ",o)}e.setString(t)},n.makeDirectoryAsync=(r,e)=>l?new g.PromiseTask(l.mkdir(r,{recursive:!0}).then(()=>{e.setString("ok")}).catch(t=>{e.setString("error"),a.error("Unable to create directory at: '"+r+"': ",t)})):(e.setString("error"),new g.ResolveTask),n.saveStringToFileAsync=function(r,e,t){i&&i.writeFile(e,r,"utf8",o=>{t.setString("ok"),o&&(a.error("Unable to save the text to path: '"+e+"': ",o),t.setString("error"))})},n.saveStringToFileAsyncTask=(r,e,t)=>l?new g.PromiseTask(l.writeFile(e,r,{encoding:"utf8"}).then(()=>{t.setString("ok")}).catch(o=>{t.setString("error"),a.error("Unable to save the text to path: '"+e+"': ",o)})):(t.setString("error"),new g.ResolveTask),n.saveStringToFile=function(r,e,t){let o="error";if(i)try{i.writeFileSync(e,r,"utf8"),o="ok"}catch(s){a.error("Unable to save the text to path: '"+e+"': ",s)}t.setString(o)},n.saveVariableToJSONFile=function(r,e,t){let o="error";if(i)try{i.writeFileSync(e,JSON.stringify(r.toJSObject()),"utf8"),o="ok"}catch(s){a.error("Unable to save the variable to path: '"+e+"': ",s)}t.setString(o)},n.saveVariableToJSONFileAsync=function(r,e,t){i&&i.writeFile(e,JSON.stringify(r.toJSObject()),"utf8",o=>{t.setString("ok"),o&&(a.error("Unable to save the variable to path: '"+e+"': ",o),t.setString("error"))})},n.saveVariableToJSONFileAsyncTask=(r,e,t)=>l?new g.PromiseTask(l.writeFile(e,JSON.stringify(r.toJSObject()),{encoding:"utf8"}).then(()=>{t.setString("ok")}).catch(o=>{t.setString("error"),a.error("Unable to save the text to path: '"+e+"': ",o)})):(t.setString("error"),new g.ResolveTask),n.loadStringFromFile=function(r,e,t,o){let s="error";if(i)try{const c=i.readFileSync(e,"utf8");c&&(r.setString(o?c.replace(/\r/g,""):c),s="ok")}catch(c){a.error("Unable to load the file at path: '"+e+"': ",c)}t.setString(s)},n.loadVariableFromJSONFile=function(r,e,t,o){let s="error";if(i)try{const c=i.readFileSync(e,"utf8");c&&(r.fromJSON(o?c.replace(/\r/g,""):c),s="ok")}catch(c){a.error("Unable to load variable from the file at path: '"+e+"': ",c)}t.setString(s)},n.loadVariableFromJSONFileAsync=function(r,e,t,o){i&&i.readFile(e,"utf8",(s,c)=>{c&&(r.fromJSON(o?c.replace(/\r/g,""):c),t.setString("ok")),s&&(a.error("Unable to load variable from the file at path: '"+e+"': ",s),t.setString("error"))})},n.loadVariableFromJSONFileAsyncTask=(r,e,t,o)=>l?new g.PromiseTask(l.readFile(e,{encoding:"utf8"}).then(s=>{s&&r.fromJSON(o?s.replace(/\r/g,""):s),t.setString("ok")}).catch(s=>{t.setString("error"),a.error("Unable to load the JSON file from path: '"+e+"': ",s)})):(t.setString("error"),new g.ResolveTask),n.loadStringFromFileAsync=function(r,e,t,o){i&&i.readFile(e,"utf8",(s,c)=>{c&&(r.setString(o?c.replace(/\r/g,""):c),t.setString("ok")),s&&(a.error("Unable to load the file at path: '"+e+"': ",s),t.setString("error"))})},n.loadStringFromFileAsyncTask=(r,e,t,o)=>l?new g.PromiseTask(l.readFile(e,{encoding:"utf8"}).then(s=>{s&&r.setString(o?s.replace(/\r/g,""):s),t.setString("ok")}).catch(s=>{t.setString("error"),a.error("Unable to load the text file from path: '"+e+"': ",s)})):(t.setString("error"),new g.ResolveTask),n.deleteFile=function(r,e){let t="error";if(i)try{i.unlinkSync(r),t="ok"}catch(o){a.error("Unable to delete the file: '"+r+"': ",o),t="error"}e.setString(t)},n.deleteFileAsync=function(r,e){i&&i.unlink(r,t=>{e.setString("ok"),t&&(a.error("Unable to delete the file: '"+r+"': ",t),e.setString("error"))})},n.deleteFileAsyncTask=(r,e)=>l?new g.PromiseTask(l.rm(r,{recursive:!0}).then(()=>{e.setString("ok")}).catch(t=>{e.setString("error"),a.error("Unable to delete the file: '"+r+"': ",t)})):(e.setString("error"),new g.ResolveTask),n.readdir=function(r,e){let t="error";if(i)try{t=i.readdirSync(r)}catch(o){a.error("Unable to read the directory: '"+r+"': ",o),t="error"}e.fromJSObject(t)},n.readdirAsync=(r,e)=>l?new g.PromiseTask(l.readdir(r).then(t=>{e.fromJSObject(t)}).catch(t=>{e.setString("error"),a.error("Unable to read the directory: '"+r+"': ",t)})):(e.setString("error"),new g.ResolveTask),n.pathExists=function(r){return i?i.existsSync(r):!1}})(u=g.fileSystem||(g.fileSystem={}))})(gdjs||(gdjs={}));
//# sourceMappingURL=filesystemtools.js.map
